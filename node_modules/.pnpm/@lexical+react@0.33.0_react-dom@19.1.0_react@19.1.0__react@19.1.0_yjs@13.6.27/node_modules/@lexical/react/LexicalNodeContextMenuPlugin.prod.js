/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

"use strict";var e=require("react"),t=require("react/jsx-runtime"),n=require("react-dom"),r=require("@lexical/react/LexicalComposerContext"),o=require("lexical");function i(e){var t=Object.create(null);if(e)for(var n in e)t[n]=e[n];return t.default=e,t}var l=i(e),u=i(n);function c(){return"undefined"!=typeof window}function s(e){return d(e)?(e.nodeName||"").toLowerCase():"#document"}function a(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function f(e){var t;return null==(t=(d(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function d(e){return!!c()&&(e instanceof Node||e instanceof a(e).Node)}function p(e){return!!c()&&(e instanceof Element||e instanceof a(e).Element)}function m(e){return!!c()&&(e instanceof HTMLElement||e instanceof a(e).HTMLElement)}function v(e){return!(!c()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof a(e).ShadowRoot)}function h(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=R(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function g(e){return["table","td","th"].includes(s(e))}function y(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function b(e){const t=w(),n=p(e)?R(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function w(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function x(e){return["html","body","#document"].includes(s(e))}function R(e){return a(e).getComputedStyle(e)}function E(e){return p(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function k(e){if("html"===s(e))return e;const t=e.assignedSlot||e.parentNode||v(e)&&e.host||f(e);return v(t)?t.host:t}function I(e){const t=k(e);return x(t)?e.ownerDocument?e.ownerDocument.body:e.body:m(t)&&h(t)?t:I(t)}function S(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=I(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),l=a(o);if(i){const e=C(l);return t.concat(l,l.visualViewport||[],h(o)?o:[],e&&n?S(e):[])}return t.concat(o,S(o,[],n))}function C(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const A=Math.min,L=Math.max,M=Math.round,O=Math.floor,T=e=>({x:e,y:e}),N={left:"right",right:"left",bottom:"top",top:"bottom"},P={start:"end",end:"start"};function D(e,t,n){return L(e,A(t,n))}function F(e,t){return"function"==typeof e?e(t):e}function j(e){return e.split("-")[0]}function W(e){return e.split("-")[1]}function q(e){return"x"===e?"y":"x"}function B(e){return"y"===e?"height":"width"}function V(e){return["top","bottom"].includes(j(e))?"y":"x"}function K(e){return q(V(e))}function H(e){return e.replace(/start|end/g,(e=>P[e]))}function $(e){return e.replace(/left|right|bottom|top/g,(e=>N[e]))}function _(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}
/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var z=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"].join(","),U="undefined"==typeof Element,X=U?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Y=!U&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},G=function e(t,n){var r;void 0===n&&(n=!0);var o=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===o||"true"===o||n&&t&&e(t.parentNode)},J=function(e,t,n){if(G(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(z));return t&&X.call(e,z)&&r.unshift(e),r=r.filter(n)},Q=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var l=i.shift();if(!G(l,!1))if("SLOT"===l.tagName){var u=l.assignedElements(),c=e(u.length?u:l.children,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:l,candidates:c})}else{X.call(l,z)&&r.filter(l)&&(n||!t.includes(l))&&o.push(l);var s=l.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(l),a=!G(s,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(s&&a){var f=e(!0===s?l.children:s.children,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:l,candidates:f})}else i.unshift.apply(i,l.children)}}return o},Z=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ee=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!Z(e)?0:e.tabIndex},te=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},ne=function(e){return"INPUT"===e.tagName},re=function(e){return function(e){return ne(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||Y(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!o||o===e}(e)},oe=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},ie=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=X.call(e,"details>summary:first-of-type")?e.parentElement:e;if(X.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return oe(e)}else{if("function"==typeof r){for(var i=e;e;){var l=e.parentElement,u=Y(e);if(l&&!l.shadowRoot&&!0===r(l))return oe(e);e=e.assignedSlot?e.assignedSlot:l||u===e.ownerDocument?l:u.host}e=i}if(function(e){var t,n,r,o,i=e&&Y(e),l=null===(t=i)||void 0===t?void 0:t.host,u=!1;if(i&&i!==e)for(u=!!(null!==(n=l)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(l)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!u&&l;){var c,s,a;u=!(null===(s=l=null===(c=i=Y(l))||void 0===c?void 0:c.host)||void 0===s||null===(a=s.ownerDocument)||void 0===a||!a.contains(l))}return u}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},le=function(e,t){return!(t.disabled||G(t)||function(e){return ne(e)&&"hidden"===e.type}(t)||ie(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!X.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},ue=function(e,t){return!(re(t)||ee(t)<0||!le(e,t))},ce=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},se=function e(t){var n=[],r=[];return t.forEach((function(t,o){var i=!!t.scopeParent,l=i?t.scopeParent:t,u=function(e,t){var n=ee(e);return n<0&&t&&!Z(e)?0:n}(l,i),c=i?e(t.candidates):l;0===u?i?n.push.apply(n,c):n.push(l):r.push({documentOrder:o,tabIndex:u,item:t,isScope:i,content:c})})),r.sort(te).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},ae=function(e,t){var n;return n=(t=t||{}).getShadowRoot?Q([e],t.includeContainer,{filter:ue.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:ce}):J(e,t.includeContainer,ue.bind(null,t)),se(n)},fe=function(e,t){return(t=t||{}).getShadowRoot?Q([e],t.includeContainer,{filter:le.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):J(e,t.includeContainer,le.bind(null,t))},de=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==X.call(e,z)&&ue(t,e)};function pe(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function me(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function ve(){const e=/android/i;return e.test(pe())||e.test(me())}const he="data-floating-ui-focusable",ge="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",ye="ArrowLeft",be="ArrowRight",we="ArrowUp",xe="ArrowDown";function Re(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function Ee(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&v(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function ke(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Ie(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function Se(e){return(null==e?void 0:e.ownerDocument)||document}function Ce(e){return!!e&&("combobox"===e.getAttribute("role")&&function(e){return m(e)&&e.matches(ge)}(e))}function Ae(e){return e?e.hasAttribute(he)?e:e.querySelector("["+he+"]")||e:null}function Le(e,t,n){void 0===n&&(n=!0);let r=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),o=r;for(;o.length;)o=n?e.filter((e=>{var t;return null==(t=o)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})):e,r=r.concat(o);return r}function Me(e,t){var n;let r=[],o=null==(n=e.find((e=>e.id===t)))?void 0:n.parentId;for(;o;){const t=e.find((e=>e.id===o));o=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}function Oe(e){e.preventDefault(),e.stopPropagation()}function Te(e){return!(0!==e.mozInputSource||!e.isTrusted)||(ve()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function Ne(e){return!me().includes("jsdom/")&&(!ve()&&0===e.width&&0===e.height||ve()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}var Pe="undefined"!=typeof document?e.useLayoutEffect:e.useEffect;function De(e){const t=l.useRef(e);return Pe((()=>{t.current=e})),t}const Fe={...l}.useInsertionEffect||(e=>e());function je(e){const t=l.useRef((()=>{if("production"!==process.env.NODE_ENV)throw new Error("Cannot call an event handler while rendering.")}));return Fe((()=>{t.current=e})),l.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function We(e,t,n){return Math.floor(e/t)!==n}function qe(e,t){return t<0||t>=e.current.length}function Be(e,t){return Ke(e,{disabledIndices:t})}function Ve(e,t){return Ke(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Ke(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:o,amount:i=1}=void 0===t?{}:t,l=n;do{l+=r?-i:i}while(l>=0&&l<=e.current.length-1&&_e(e,l,o));return l}function He(e,t,n,r,o){if(-1===e)return-1;const i=n.indexOf(e),l=t[e];switch(o){case"tl":return i;case"tr":return l?i+l.width-1:i;case"bl":return l?i+(l.height-1)*r:i;case"br":return n.lastIndexOf(e)}}function $e(e,t){return t.flatMap(((t,n)=>e.includes(t)?[n]:[]))}function _e(e,t,n){if(n)return n.includes(t);const r=e.current[t];return null==r||r.hasAttribute("disabled")||"true"===r.getAttribute("aria-disabled")}const ze=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ue(e,t){const n=ae(e,ze()),r=n.length;if(0===r)return;const o=Re(Se(e)),i=n.indexOf(o);return n[-1===i?1===t?0:r-1:i+t]}function Xe(e){return Ue(Se(e).body,1)||e}function Ye(e){return Ue(Se(e).body,-1)||e}function Ge(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Ee(n,r)}function Je(e){ae(e,ze()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function Qe(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}function Ze(e,t,n){let{reference:r,floating:o}=e;const i=V(t),l=K(t),u=B(l),c=j(t),s="y"===i,a=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,d=r[u]/2-o[u]/2;let p;switch(c){case"top":p={x:a,y:r.y-o.height};break;case"bottom":p={x:a,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-o.width,y:f};break;default:p={x:r.x,y:r.y}}switch(W(t)){case"start":p[l]-=d*(n&&s?-1:1);break;case"end":p[l]+=d*(n&&s?-1:1)}return p}async function et(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:l,elements:u,strategy:c}=e,{boundary:s="clippingAncestors",rootBoundary:a="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=F(t,e),m=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(p),v=u[d?"floating"===f?"reference":"floating":f],h=_(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(v)))||n?v:v.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(u.floating)),boundary:s,rootBoundary:a,strategy:c})),g="floating"===f?{x:r,y:o,width:l.floating.width,height:l.floating.height}:l.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(u.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=_(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:g,offsetParent:y,strategy:c}):g);return{top:(h.top-w.top+m.top)/b.y,bottom:(w.bottom-h.bottom+m.bottom)/b.y,left:(h.left-w.left+m.left)/b.x,right:(w.right-h.right+m.right)/b.x}}function tt(e){const t=R(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=m(e),i=o?e.offsetWidth:n,l=o?e.offsetHeight:r,u=M(n)!==i||M(r)!==l;return u&&(n=i,r=l),{width:n,height:r,$:u}}function nt(e){return p(e)?e:e.contextElement}function rt(e){const t=nt(e);if(!m(t))return T(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=tt(t);let l=(i?M(n.width):n.width)/r,u=(i?M(n.height):n.height)/o;return l&&Number.isFinite(l)||(l=1),u&&Number.isFinite(u)||(u=1),{x:l,y:u}}const ot=T(0);function it(e){const t=a(e);return w()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ot}function lt(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=nt(e);let l=T(1);t&&(r?p(r)&&(l=rt(r)):l=rt(e));const u=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==a(e))&&t}(i,n,r)?it(i):T(0);let c=(o.left+u.x)/l.x,s=(o.top+u.y)/l.y,f=o.width/l.x,d=o.height/l.y;if(i){const e=a(i),t=r&&p(r)?a(r):r;let n=e,o=C(n);for(;o&&r&&t!==n;){const e=rt(o),t=o.getBoundingClientRect(),r=R(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,l=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,s*=e.y,f*=e.x,d*=e.y,c+=i,s+=l,n=a(o),o=C(n)}}return _({width:f,height:d,x:c,y:s})}function ut(e,t){const n=E(e).scrollLeft;return t?t.left+n:lt(f(e)).left+n}function ct(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:ut(e,r)),y:r.top+t.scrollTop}}function st(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=a(e),r=f(e),o=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,u=0,c=0;if(o){i=o.width,l=o.height;const e=w();(!e||e&&"fixed"===t)&&(u=o.offsetLeft,c=o.offsetTop)}return{width:i,height:l,x:u,y:c}}(e,n);else if("document"===t)r=function(e){const t=f(e),n=E(e),r=e.ownerDocument.body,o=L(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=L(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+ut(e);const u=-n.scrollTop;return"rtl"===R(r).direction&&(l+=L(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:l,y:u}}(f(e));else if(p(t))r=function(e,t){const n=lt(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=m(e)?rt(e):T(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=it(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return _(r)}function at(e,t){const n=k(e);return!(n===t||!p(n)||x(n))&&("fixed"===R(n).position||at(n,t))}function ft(e,t,n){const r=m(t),o=f(t),i="fixed"===n,l=lt(e,!0,i,t);let u={scrollLeft:0,scrollTop:0};const c=T(0);if(r||!r&&!i)if(("body"!==s(t)||h(o))&&(u=E(t)),r){const e=lt(t,!0,i,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else o&&(c.x=ut(o));const a=!o||r||i?T(0):ct(o,u);return{x:l.left+u.scrollLeft-c.x-a.x,y:l.top+u.scrollTop-c.y-a.y,width:l.width,height:l.height}}function dt(e){return"static"===R(e).position}function pt(e,t){if(!m(e)||"fixed"===R(e).position)return null;if(t)return t(e);let n=e.offsetParent;return f(e)===n&&(n=n.ownerDocument.body),n}function mt(e,t){const n=a(e);if(y(e))return n;if(!m(e)){let t=k(e);for(;t&&!x(t);){if(p(t)&&!dt(t))return t;t=k(t)}return n}let r=pt(e,t);for(;r&&g(r)&&dt(r);)r=pt(r,t);return r&&x(r)&&dt(r)&&!b(r)?n:r||function(e){let t=k(e);for(;m(t)&&!x(t);){if(b(t))return t;if(y(t))return null;t=k(t)}return null}(e)||n}const vt={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,l=f(r),u=!!t&&y(t.floating);if(r===l||u&&i)return n;let c={scrollLeft:0,scrollTop:0},a=T(1);const d=T(0),p=m(r);if((p||!p&&!i)&&(("body"!==s(r)||h(l))&&(c=E(r)),m(r))){const e=lt(r);a=rt(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}const v=!l||p||i?T(0):ct(l,c,!0);return{width:n.width*a.x,height:n.height*a.y,x:n.x*a.x-c.scrollLeft*a.x+d.x+v.x,y:n.y*a.y-c.scrollTop*a.y+d.y+v.y}},getDocumentElement:f,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[..."clippingAncestors"===n?y(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=S(e,[],!1).filter((e=>p(e)&&"body"!==s(e))),o=null;const i="fixed"===R(e).position;let l=i?k(e):e;for(;p(l)&&!x(l);){const t=R(l),n=b(l);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||h(l)&&!n&&at(e,l))?r=r.filter((e=>e!==l)):o=t,l=k(l)}return t.set(e,r),r}(t,this._c):[].concat(n),r],l=i[0],u=i.reduce(((e,n)=>{const r=st(t,n,o);return e.top=L(r.top,e.top),e.right=A(r.right,e.right),e.bottom=A(r.bottom,e.bottom),e.left=L(r.left,e.left),e}),st(t,l,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},getOffsetParent:mt,getElementRects:async function(e){const t=this.getOffsetParent||mt,n=this.getDimensions,r=await n(e.floating);return{reference:ft(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=tt(e);return{width:t,height:n}},getScale:rt,isElement:p,isRTL:function(e){return"rtl"===R(e).direction}};function ht(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gt(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:l="function"==typeof ResizeObserver,layoutShift:u="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,s=nt(e),a=o||i?[...s?S(s):[],...S(t)]:[];a.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=s&&u?function(e,t){let n,r=null;const o=f(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function l(u,c){void 0===u&&(u=!1),void 0===c&&(c=1),i();const s=e.getBoundingClientRect(),{left:a,top:f,width:d,height:p}=s;if(u||t(),!d||!p)return;const m={rootMargin:-O(f)+"px "+-O(o.clientWidth-(a+d))+"px "+-O(o.clientHeight-(f+p))+"px "+-O(a)+"px",threshold:L(0,A(1,c))||1};let v=!0;function h(t){const r=t[0].intersectionRatio;if(r!==c){if(!v)return l();r?l(!1,r):n=setTimeout((()=>{l(!1,1e-7)}),1e3)}1!==r||ht(s,e.getBoundingClientRect())||l(),v=!1}try{r=new IntersectionObserver(h,{...m,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(h,m)}r.observe(e)}(!0),i}(s,n):null;let p,m=-1,v=null;l&&(v=new ResizeObserver((e=>{let[r]=e;r&&r.target===s&&v&&(v.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame((()=>{var e;null==(e=v)||e.observe(t)}))),n()})),s&&!c&&v.observe(s),v.observe(t));let h=c?lt(e):null;return c&&function t(){const r=lt(e);h&&!ht(h,r)&&n();h=r,p=requestAnimationFrame(t)}(),n(),()=>{var e;a.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=v)||e.disconnect(),v=null,c&&cancelAnimationFrame(p)}}const yt=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:l,middlewareData:u}=t,c=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),l=j(n),u=W(n),c="y"===V(n),s=["left","top"].includes(l)?-1:1,a=i&&c?-1:1,f=F(t,e);let{mainAxis:d,crossAxis:p,alignmentAxis:m}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return u&&"number"==typeof m&&(p="end"===u?-1*m:m),c?{x:p*a,y:d*s}:{x:d*s,y:p*a}}(t,e);return l===(null==(n=u.offset)?void 0:n.placement)&&null!=(r=u.arrow)&&r.alignmentOffset?{}:{x:o+c.x,y:i+c.y,data:{...c,placement:l}}}}},bt=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:u={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=F(e,t),s={x:n,y:r},a=await et(t,c),f=V(j(o)),d=q(f);let p=s[d],m=s[f];if(i){const e="y"===d?"bottom":"right";p=D(p+a["y"===d?"top":"left"],p,p-a[e])}if(l){const e="y"===f?"bottom":"right";m=D(m+a["y"===f?"top":"left"],m,m-a[e])}const v=u.fn({...t,[d]:p,[f]:m});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[d]:i,[f]:l}}}}}},wt=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:l,initialPlacement:u,platform:c,elements:s}=t,{mainAxis:a=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...h}=F(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const g=j(o),y=V(u),b=j(u)===u,w=await(null==c.isRTL?void 0:c.isRTL(s.floating)),x=d||(b||!v?[$(u)]:function(e){const t=$(e);return[H(e),t,H(t)]}(u)),R="none"!==m;!d&&R&&x.push(...function(e,t,n,r){const o=W(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:l;default:return[]}}(j(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(H)))),i}(u,v,m,w));const E=[u,...x],k=await et(t,h),I=[];let S=(null==(r=i.flip)?void 0:r.overflows)||[];if(a&&I.push(k[g]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=W(e),o=K(e),i=B(o);let l="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=$(l)),[l,$(l)]}(o,l,w);I.push(k[e[0]],k[e[1]])}if(S=[...S,{placement:o,overflows:I}],!I.every((e=>e<=0))){var C,A;const e=((null==(C=i.flip)?void 0:C.index)||0)+1,t=E[e];if(t)return{data:{index:e,overflows:S},reset:{placement:t}};let n=null==(A=S.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:A.placement;if(!n)switch(p){case"bestFit":{var L;const e=null==(L=S.filter((e=>{if(R){const t=V(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:L[0];e&&(n=e);break}case"initialPlacement":n=u}if(o!==n)return{reset:{placement:n}}}return{}}}},xt=(e,t,n)=>{const r=new Map,o={platform:vt,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:l}=n,u=i.filter(Boolean),c=await(null==l.isRTL?void 0:l.isRTL(t));let s=await l.getElementRects({reference:e,floating:t,strategy:o}),{x:a,y:f}=Ze(s,r,c),d=r,p={},m=0;for(let n=0;n<u.length;n++){const{name:i,fn:v}=u[n],{x:h,y:g,data:y,reset:b}=await v({x:a,y:f,initialPlacement:r,placement:d,strategy:o,middlewareData:p,rects:s,platform:l,elements:{reference:e,floating:t}});a=null!=h?h:a,f=null!=g?g:f,p={...p,[i]:{...p[i],...y}},b&&m<=50&&(m++,"object"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(s=!0===b.rects?await l.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:a,y:f}=Ze(s,d,c))),n=-1)}return{x:a,y:f,placement:d,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var Rt="undefined"!=typeof document?e.useLayoutEffect:e.useEffect;function Et(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!Et(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!Et(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function kt(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function It(e,t){const n=kt(e);return Math.round(t*n)/n}function St(e){const t=l.useRef(e);return Rt((()=>{t.current=e})),t}const Ct=(e,t)=>({...bt(e),options:[e,t]}),At=(e,t)=>({...wt(e),options:[e,t]}),Lt="data-floating-ui-focusable",Mt="active",Ot="selected",Tt="ArrowLeft",Nt="ArrowRight",Pt="ArrowUp",Dt="ArrowDown",Ft={...l};let jt=!1,Wt=0;const qt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Wt++;const Bt=Ft.useId||function(){const[e,t]=l.useState((()=>jt?qt():void 0));return Pe((()=>{null==e&&t(qt())}),[]),l.useEffect((()=>{jt=!0}),[]),e};let Vt;function Kt(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o="Floating UI: "+n.join(" ");var i;null!=(e=Vt)&&e.has(o)||(null==(i=Vt)||i.add(o),console.warn(o))}"production"!==process.env.NODE_ENV&&(Vt=new Set);const Ht=l.createContext(null),$t=l.createContext(null),_t=()=>{var e;return(null==(e=l.useContext(Ht))?void 0:e.id)||null},zt=()=>l.useContext($t);function Ut(e){return"data-floating-ui-"+e}function Xt(e){-1!==e.current&&(clearTimeout(e.current),e.current=-1)}let Yt=0;function Gt(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(Yt);const i=()=>null==e?void 0:e.focus({preventScroll:n});o?i():Yt=requestAnimationFrame(i)}let Jt=new WeakMap,Qt=new WeakSet,Zt={},en=0;const tn=e=>e&&(e.host||tn(e.parentNode)),nn=(e,t)=>t.map((t=>{if(e.contains(t))return t;const n=tn(t);return e.contains(n)?n:null})).filter((e=>null!=e));function rn(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=(o=e[0],(null==o?void 0:o.ownerDocument)||document).body;var o;return function(e,t,n,r){const o="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,l=nn(t,e),u=new Set,c=new Set(l),a=[];Zt[o]||(Zt[o]=new WeakMap);const f=Zt[o];return l.forEach((function e(t){t&&!u.has(t)&&(u.add(t),t.parentNode&&e(t.parentNode))})),function e(t){t&&!c.has(t)&&[].forEach.call(t.children,(t=>{if("script"!==s(t))if(u.has(t))e(t);else{const e=i?t.getAttribute(i):null,n=null!==e&&"false"!==e,r=Jt.get(t)||0,l=i?r+1:r,u=(f.get(t)||0)+1;Jt.set(t,l),f.set(t,u),a.push(t),1===l&&n&&Qt.add(t),1===u&&t.setAttribute(o,""),!n&&i&&t.setAttribute(i,"inert"===i?"":"true")}}))}(t),u.clear(),en++,()=>{a.forEach((e=>{const t=Jt.get(e)||0,n=i?t-1:t,r=(f.get(e)||0)-1;Jt.set(e,n),f.set(e,r),n||(!Qt.has(e)&&i&&e.removeAttribute(i),Qt.delete(e)),r||e.removeAttribute(o)})),en--,en||(Jt=new WeakMap,Jt=new WeakMap,Qt=new WeakSet,Zt={})}}(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const on={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},ln=l.forwardRef((function(e,n){const[r,o]=l.useState();Pe((()=>{/apple/i.test(navigator.vendor)&&o("button")}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":!r||void 0,[Ut("focus-guard")]:"",style:on};return t.jsx("span",{...e,...i})})),un=l.createContext(null),cn=Ut("portal");function sn(e){const{children:n,id:r,root:o,preserveTabOrder:i=!0}=e,c=function(e){void 0===e&&(e={});const{id:t,root:n}=e,r=Bt(),o=an(),[i,u]=l.useState(null),c=l.useRef(null);return Pe((()=>()=>{null==i||i.remove(),queueMicrotask((()=>{c.current=null}))}),[i]),Pe((()=>{if(!r)return;if(c.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(cn,""),e.appendChild(n),c.current=n,u(n)}),[t,r]),Pe((()=>{if(null===n)return;if(!r)return;if(c.current)return;let e=n||(null==o?void 0:o.portalNode);e&&!p(e)&&(e=e.current),e=e||document.body;let i=null;t&&(i=document.createElement("div"),i.id=t,e.appendChild(i));const l=document.createElement("div");l.id=r,l.setAttribute(cn,""),e=i||e,e.appendChild(l),c.current=l,u(l)}),[t,n,r,o]),i}({id:r,root:o}),[s,a]=l.useState(null),f=l.useRef(null),d=l.useRef(null),m=l.useRef(null),v=l.useRef(null),h=null==s?void 0:s.modal,g=null==s?void 0:s.open,y=!!s&&!s.modal&&s.open&&i&&!(!o&&!c);return l.useEffect((()=>{if(c&&i&&!h)return c.addEventListener("focusin",e,!0),c.addEventListener("focusout",e,!0),()=>{c.removeEventListener("focusin",e,!0),c.removeEventListener("focusout",e,!0)};function e(e){if(c&&Ge(e)){("focusin"===e.type?Qe:Je)(c)}}}),[c,i,h]),l.useEffect((()=>{c&&(g||Qe(c))}),[g,c]),t.jsxs(un.Provider,{value:l.useMemo((()=>({preserveTabOrder:i,beforeOutsideRef:f,afterOutsideRef:d,beforeInsideRef:m,afterInsideRef:v,portalNode:c,setFocusManagerState:a})),[i,c]),children:[y&&c&&t.jsx(ln,{"data-type":"outside",ref:f,onFocus:e=>{if(Ge(e,c)){var t;null==(t=m.current)||t.focus()}else{const e=Ye(s?s.domReference:null);null==e||e.focus()}}}),y&&c&&t.jsx("span",{"aria-owns":c.id,style:on}),c&&u.createPortal(n,c),y&&c&&t.jsx(ln,{"data-type":"outside",ref:d,onFocus:e=>{if(Ge(e,c)){var t;null==(t=v.current)||t.focus()}else{const t=Xe(s?s.domReference:null);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}const an=()=>l.useContext(un);function fn(e){return l.useMemo((()=>t=>{e.forEach((e=>{e&&(e.current=t)}))}),e)}const dn=20;let pn=[];function mn(){return pn.slice().reverse().find((e=>e.isConnected))}function vn(e,t){var n;if(!(t.current.includes("floating")||null!=(n=e.getAttribute("role"))&&n.includes("dialog")))return;const r=ze(),o=fe(e,r).filter((e=>{const t=e.getAttribute("data-tabindex")||"";return de(e,r)||e.hasAttribute("data-tabindex")&&!t.startsWith("-")})),i=e.getAttribute("tabindex");t.current.includes("floating")||0===o.length?"0"!==i&&e.setAttribute("tabindex","0"):("-1"!==i||e.hasAttribute("data-tabindex")&&"-1"!==e.getAttribute("data-tabindex"))&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const hn=l.forwardRef((function(e,n){return t.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:on})}));function gn(e){const{context:n,children:r,disabled:o=!1,order:i=["content"],guards:u=!0,initialFocus:c=0,returnFocus:a=!0,restoreFocus:f=!1,modal:d=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:v=!0,outsideElementsInert:h=!1,getInsideElements:g=(()=>[])}=e,{open:y,onOpenChange:b,events:w,dataRef:x,elements:{domReference:R,floating:E}}=n,k=je((()=>{var e;return null==(e=x.current.floatingContext)?void 0:e.nodeId})),I=je(g),S="number"==typeof c&&c<0,C=Ce(R)&&S,A="undefined"!=typeof HTMLElement&&"inert"in HTMLElement.prototype,L=!A||u,M=!L||A&&h,O=De(i),T=De(c),N=De(a),P=zt(),D=an(),F=l.useRef(null),j=l.useRef(null),W=l.useRef(!1),q=l.useRef(!1),B=l.useRef(-1),V=null!=D,K=Ae(E),H=je((function(e){return void 0===e&&(e=K),e?ae(e,ze()):[]})),$=je((e=>{const t=H(e);return O.current.map((e=>R&&"reference"===e?R:K&&"floating"===e?K:t)).filter(Boolean).flat()}));l.useEffect((()=>{if(o)return;if(!d)return;function e(e){if("Tab"===e.key){Ee(K,Re(Se(K)))&&0===H().length&&!C&&Oe(e);const t=$(),n=ke(e);"reference"===O.current[0]&&n===R&&(Oe(e),e.shiftKey?Gt(t[t.length-1]):Gt(t[1])),"floating"===O.current[1]&&n===K&&e.shiftKey&&(Oe(e),Gt(t[0]))}}const t=Se(K);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[o,R,K,d,O,C,H,$]),l.useEffect((()=>{if(!o&&E)return E.addEventListener("focusin",e),()=>{E.removeEventListener("focusin",e)};function e(e){const t=ke(e),n=H().indexOf(t);-1!==n&&(B.current=n)}}),[o,E,H]),l.useEffect((()=>{if(!o&&v)return E&&m(R)?(R.addEventListener("focusout",t),R.addEventListener("pointerdown",e),E.addEventListener("focusout",t),()=>{R.removeEventListener("focusout",t),R.removeEventListener("pointerdown",e),E.removeEventListener("focusout",t)}):void 0;function e(){q.current=!0,setTimeout((()=>{q.current=!1}))}function t(e){const t=e.relatedTarget,n=e.currentTarget;queueMicrotask((()=>{const r=k(),o=!(Ee(R,t)||Ee(E,t)||Ee(t,E)||Ee(null==D?void 0:D.portalNode,t)||null!=t&&t.hasAttribute(Ut("focus-guard"))||P&&(Le(P.nodesRef.current,r).find((e=>{var n,r;return Ee(null==(n=e.context)?void 0:n.elements.floating,t)||Ee(null==(r=e.context)?void 0:r.elements.domReference,t)}))||Me(P.nodesRef.current,r).find((e=>{var n,r,o;return[null==(n=e.context)?void 0:n.elements.floating,Ae(null==(r=e.context)?void 0:r.elements.floating)].includes(t)||(null==(o=e.context)?void 0:o.elements.domReference)===t}))));if(n===R&&K&&vn(K,O),f&&o&&Re(Se(K))===Se(K).body){m(K)&&K.focus();const e=B.current,t=H(),n=t[e]||t[t.length-1]||K;m(n)&&n.focus()}!C&&d||!t||!o||q.current||t===mn()||(W.current=!0,b(!1,e,"focus-out"))}))}}),[o,R,E,K,d,P,D,b,v,f,H,C,k,O]);const _=l.useRef(null),z=l.useRef(null),U=fn([_,null==D?void 0:D.beforeInsideRef]),X=fn([z,null==D?void 0:D.afterInsideRef]);function Y(e){return!o&&p&&d?t.jsx(hn,{ref:"start"===e?F:j,onClick:e=>b(!1,e.nativeEvent),children:"string"==typeof p?p:"Dismiss"}):null}l.useEffect((()=>{var e,t;if(o)return;if(!E)return;const n=Array.from((null==D||null==(e=D.portalNode)?void 0:e.querySelectorAll("["+Ut("portal")+"]"))||[]),r=P?Me(P.nodesRef.current,k()):[],i=P&&!d?r.map((e=>{var t;return null==(t=e.context)?void 0:t.elements.floating})):[],l=null==(t=r.find((e=>{var t;return Ce((null==(t=e.context)?void 0:t.elements.domReference)||null)})))||null==(t=t.context)?void 0:t.elements.domReference,u=[E,l,...n,...i,...I(),F.current,j.current,_.current,z.current,null==D?void 0:D.beforeOutsideRef.current,null==D?void 0:D.afterOutsideRef.current,O.current.includes("reference")||C?R:null].filter((e=>null!=e)),c=d||C?rn(u,!M,M):rn(u);return()=>{c()}}),[o,R,E,d,O,D,C,L,M,P,k,I]),Pe((()=>{if(o||!m(K))return;const e=Re(Se(K));queueMicrotask((()=>{const t=$(K),n=T.current,r=("number"==typeof n?t[n]:n.current)||K,o=Ee(K,e);S||o||!y||Gt(r,{preventScroll:r===K})}))}),[o,y,K,S,$,T]),Pe((()=>{if(o||!K)return;let e=!1;const t=Se(K),n=Re(t);var r;function i(t){let{reason:n,event:r,nested:o}=t;if(["hover","safe-polygon"].includes(n)&&"mouseleave"===r.type&&(W.current=!0),"outside-press"===n)if(o)W.current=!1,e=!0;else if(Te(r)||Ne(r))W.current=!1;else{let t=!1;document.createElement("div").focus({get preventScroll(){return t=!0,!1}}),t?(W.current=!1,e=!0):W.current=!0}}r=n,pn=pn.filter((e=>e.isConnected)),r&&"body"!==s(r)&&(pn.push(r),pn.length>dn&&(pn=pn.slice(-20))),w.on("openchange",i);const l=t.createElement("span");return l.setAttribute("tabindex","-1"),l.setAttribute("aria-hidden","true"),Object.assign(l.style,on),V&&R&&R.insertAdjacentElement("afterend",l),()=>{w.off("openchange",i);const n=Re(t),r=Ee(E,n)||P&&Le(P.nodesRef.current,k()).some((e=>{var t;return Ee(null==(t=e.context)?void 0:t.elements.floating,n)})),o=function(){if("boolean"==typeof N.current){const e=R||mn();return e&&e.isConnected?e:l}return N.current.current||l}();queueMicrotask((()=>{const i=function(e){const t=ze();return de(e,t)?e:ae(e,t)[0]||e}(o);N.current&&!W.current&&m(i)&&(i===n||n===t.body||r)&&i.focus({preventScroll:e}),l.remove()}))}}),[o,E,K,N,x,w,P,V,R,k]),l.useEffect((()=>{queueMicrotask((()=>{W.current=!1}))}),[o]),Pe((()=>{if(!o&&D)return D.setFocusManagerState({modal:d,closeOnFocusOut:v,open:y,onOpenChange:b,domReference:R}),()=>{D.setFocusManagerState(null)}}),[o,D,d,y,b,v,R]),Pe((()=>{o||K&&vn(K,O)}),[o,K,O]);const G=!o&&L&&(!d||!C)&&(V||d);return t.jsxs(t.Fragment,{children:[G&&t.jsx(ln,{"data-type":"inside",ref:U,onFocus:e=>{if(d){const e=$();Gt("reference"===i[0]?e[0]:e[e.length-1])}else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(W.current=!1,Ge(e,D.portalNode)){const e=Xe(R);null==e||e.focus()}else{var t;null==(t=D.beforeOutsideRef.current)||t.focus()}}}),!C&&Y("start"),r,Y("end"),G&&t.jsx(ln,{"data-type":"inside",ref:X,onFocus:e=>{if(d)Gt($()[0]);else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(v&&(W.current=!0),Ge(e,D.portalNode)){const e=Ye(R);null==e||e.focus()}else{var t;null==(t=D.afterOutsideRef.current)||t.focus()}}})]})}let yn=0;let bn=()=>{};const wn=l.forwardRef((function(e,n){const{lockScroll:r=!1,...o}=e;return Pe((()=>{if(r)return yn++,1===yn&&(bn=function(){const e=/iP(hone|ad|od)|iOS/.test(pe()),t=document.body.style,n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",r=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,i=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",r&&(t[n]=r+"px"),e){var l,u;const e=(null==(l=window.visualViewport)?void 0:l.offsetLeft)||0,n=(null==(u=window.visualViewport)?void 0:u.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(i-Math.floor(n))+"px",left:-(o-Math.floor(e))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[n]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,i))}}()),()=>{yn--,0===yn&&bn()}}),[r]),t.jsx("div",{ref:n,...o,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}})})),xn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Rn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},En=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function kn(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=Bt(),i=l.useRef({}),[u]=l.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;null==(r=e.get(t))||r.delete(n)}}}())),c=null!=_t();if("production"!==process.env.NODE_ENV){const e=r.reference;e&&!p(e)&&function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o="Floating UI: "+n.join(" ");var i;null!=(e=Vt)&&e.has(o)||(null==(i=Vt)||i.add(o),console.error(o))}("Cannot pass a virtual element to the `elements.reference` option,","as it must be a real DOM element. Use `refs.setPositionReference()`","instead.")}const[s,a]=l.useState(r.reference),f=je(((e,t,r)=>{i.current.openEvent=e?t:void 0,u.emit("openchange",{open:e,event:t,reason:r,nested:c}),null==n||n(e,t,r)})),d=l.useMemo((()=>({setPositionReference:a})),[]),m=l.useMemo((()=>({reference:s||r.reference||null,floating:r.floating||null,domReference:r.reference})),[s,r.reference,r.floating]);return l.useMemo((()=>({dataRef:i,open:t,onOpenChange:f,elements:m,events:u,floatingId:o,refs:d})),[t,f,m,u,o,d])}function In(e){void 0===e&&(e={});const{nodeId:t}=e,n=kn({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,c]=l.useState(null),[s,a]=l.useState(null),f=(null==o?void 0:o.domReference)||i,d=l.useRef(null),m=zt();Pe((()=>{f&&(d.current=f)}),[f]);const v=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:c}={},transform:s=!0,whileElementsMounted:a,open:f}=e,[d,p]=l.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,v]=l.useState(r);Et(m,r)||v(r);const[h,g]=l.useState(null),[y,b]=l.useState(null),w=l.useCallback((e=>{e!==k.current&&(k.current=e,g(e))}),[]),x=l.useCallback((e=>{e!==I.current&&(I.current=e,b(e))}),[]),R=i||h,E=c||y,k=l.useRef(null),I=l.useRef(null),S=l.useRef(d),C=null!=a,A=St(a),L=St(o),M=St(f),O=l.useCallback((()=>{if(!k.current||!I.current)return;const e={placement:t,strategy:n,middleware:m};L.current&&(e.platform=L.current),xt(k.current,I.current,e).then((e=>{const t={...e,isPositioned:!1!==M.current};T.current&&!Et(S.current,t)&&(S.current=t,u.flushSync((()=>{p(t)})))}))}),[m,t,n,L,M]);Rt((()=>{!1===f&&S.current.isPositioned&&(S.current.isPositioned=!1,p((e=>({...e,isPositioned:!1}))))}),[f]);const T=l.useRef(!1);Rt((()=>(T.current=!0,()=>{T.current=!1})),[]),Rt((()=>{if(R&&(k.current=R),E&&(I.current=E),R&&E){if(A.current)return A.current(R,E,O);O()}}),[R,E,O,A,C]);const N=l.useMemo((()=>({reference:k,floating:I,setReference:w,setFloating:x})),[w,x]),P=l.useMemo((()=>({reference:R,floating:E})),[R,E]),D=l.useMemo((()=>{const e={position:n,left:0,top:0};if(!P.floating)return e;const t=It(P.floating,d.x),r=It(P.floating,d.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...kt(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,s,P.floating,d.x,d.y]);return l.useMemo((()=>({...d,update:O,refs:N,elements:P,floatingStyles:D})),[d,O,N,P,D])}({...e,elements:{...o,...s&&{reference:s}}}),h=l.useCallback((e=>{const t=p(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;a(t),v.refs.setReference(t)}),[v.refs]),g=l.useCallback((e=>{(p(e)||null===e)&&(d.current=e,c(e)),(p(v.refs.reference.current)||null===v.refs.reference.current||null!==e&&!p(e))&&v.refs.setReference(e)}),[v.refs]),y=l.useMemo((()=>({...v.refs,setReference:g,setPositionReference:h,domReference:d})),[v.refs,g,h]),b=l.useMemo((()=>({...v.elements,domReference:f})),[v.elements,f]),w=l.useMemo((()=>({...v,...r,refs:y,elements:b,nodeId:t})),[v,y,b,t,r]);return Pe((()=>{r.dataRef.current.floatingContext=w;const e=null==m?void 0:m.nodesRef.current.find((e=>e.id===t));e&&(e.context=w)})),l.useMemo((()=>({...v,context:w,refs:y,elements:b})),[v,y,b,w])}function Sn(e,t,n){const r=new Map,o="item"===n;let i=e;if(o&&e){const{[Mt]:t,[Ot]:n,...r}=e;i=r}return{..."floating"===n&&{tabIndex:-1,[Lt]:""},...i,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,i]=t;var l;o&&[Mt,Ot].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof i&&(null==(l=r.get(n))||l.push(i),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return null==(e=r.get(n))?void 0:e.map((e=>e(...o))).find((e=>void 0!==e))})):e[n]=i)})),e):e),{})}}const Cn="Escape";function An(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Ln(e,t){return An(t,e===Pt||e===Dt,e===Tt||e===Nt)}function Mn(e,t,n){return An(t,e===Dt,n?e===Tt:e===Nt)||"Enter"===e||" "===e||""===e}function On(e,t,n){return An(t,n?e===Tt:e===Nt,e===Dt)}function Tn(e,t,n,r){return"both"===t||"horizontal"===t&&r&&r>1?e===Cn:An(t,n?e===Nt:e===Tt,e===Pt)}function Nn(e,t){const{open:n,onOpenChange:r,elements:o,floatingId:i}=e,{listRef:u,activeIndex:c,onNavigate:s=(()=>{}),enabled:a=!0,selectedIndex:f=null,allowEscape:d=!1,loop:p=!1,nested:v=!1,rtl:h=!1,virtual:g=!1,focusItemOnOpen:y="auto",focusItemOnHover:b=!0,openOnArrowKeyDown:w=!0,disabledIndices:x,orientation:R="vertical",parentOrientation:E,cols:k=1,scrollItemIntoView:I=!0,virtualItemRef:S,itemSizes:C,dense:A=!1}=t;"production"!==process.env.NODE_ENV&&(d&&(p||Kt("`useListNavigation` looping must be enabled to allow escaping."),g||Kt("`useListNavigation` must be virtual to allow escaping.")),"vertical"===R&&k>1&&Kt("In grid list navigation mode (`cols` > 1), the `orientation` should",'be either "horizontal" or "both".'));const L=De(Ae(o.floating)),M=_t(),T=zt();Pe((()=>{e.dataRef.current.orientation=R}),[e,R]);const N=je((()=>{s(-1===F.current?null:F.current)})),P=Ce(o.domReference),D=l.useRef(y),F=l.useRef(null!=f?f:-1),j=l.useRef(null),W=l.useRef(!0),q=l.useRef(N),B=l.useRef(!!o.floating),V=l.useRef(n),K=l.useRef(!1),H=l.useRef(!1),$=De(x),_=De(n),z=De(I),U=De(f),[X,Y]=l.useState(),[G,J]=l.useState(),Q=je((()=>{function e(e){var t;g?(null!=(t=e.id)&&t.endsWith("-fui-option")&&(e.id=i+"-"+Math.random().toString(16).slice(2,10)),Y(e.id),null==T||T.events.emit("virtualfocus",e),S&&(S.current=e)):Gt(e,{sync:K.current,preventScroll:!0})}const t=u.current[F.current],n=H.current;t&&e(t);(K.current?e=>e():requestAnimationFrame)((()=>{const r=u.current[F.current]||t;if(!r)return;t||e(r);const o=z.current;o&&ee&&(n||!W.current)&&(null==r.scrollIntoView||r.scrollIntoView("boolean"==typeof o?{block:"nearest",inline:"nearest"}:o))}))}));Pe((()=>{a&&(n&&o.floating?D.current&&null!=f&&(H.current=!0,F.current=f,N()):B.current&&(F.current=-1,q.current()))}),[a,n,o.floating,f,N]),Pe((()=>{if(a&&n&&o.floating)if(null==c){if(K.current=!1,null!=U.current)return;if(B.current&&(F.current=-1,Q()),(!V.current||!B.current)&&D.current&&(null!=j.current||!0===D.current&&null==j.current)){let e=0;const t=()=>{if(null==u.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else F.current=null==j.current||Mn(j.current,R,h)||v?Be(u,$.current):Ve(u,$.current),j.current=null,N()};t()}}else qe(u,c)||(F.current=c,Q(),H.current=!1)}),[a,n,o.floating,c,U,v,u,R,h,N,Q,$]),Pe((()=>{var e;if(!a||o.floating||!T||g||!B.current)return;const t=T.nodesRef.current,n=null==(e=t.find((e=>e.id===M)))||null==(e=e.context)?void 0:e.elements.floating,r=Re(Se(o.floating)),i=t.some((e=>e.context&&Ee(e.context.elements.floating,r)));n&&!i&&W.current&&n.focus({preventScroll:!0})}),[a,o.floating,T,M,g]),Pe((()=>{if(a&&T&&g&&!M)return T.events.on("virtualfocus",e),()=>{T.events.off("virtualfocus",e)};function e(e){J(e.id),S&&(S.current=e)}}),[a,T,g,M,S]),Pe((()=>{q.current=N,V.current=n,B.current=!!o.floating})),Pe((()=>{n||(j.current=null)}),[n]);const Z=null!=c,ee=l.useMemo((()=>{function e(e){if(!n)return;const t=u.current.indexOf(e);-1!==t&&F.current!==t&&(F.current=t,N())}return{onFocus(t){let{currentTarget:n}=t;K.current=!0,e(n)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...b&&{onMouseMove(t){let{currentTarget:n}=t;K.current=!0,H.current=!1,e(n)},onPointerLeave(e){let{pointerType:t}=e;var n;W.current&&"touch"!==t&&(K.current=!0,F.current=-1,N(),g||null==(n=L.current)||n.focus({preventScroll:!0}))}}}}),[n,L,b,u,N,g]),te=l.useCallback((()=>{var e;return null!=E?E:null==T||null==(e=T.nodesRef.current.find((e=>e.id===M)))||null==(e=e.context)||null==(e=e.dataRef)?void 0:e.current.orientation}),[M,T,E]),ne=je((e=>{if(W.current=!1,K.current=!0,229===e.which)return;if(!_.current&&e.currentTarget===L.current)return;if(v&&Tn(e.key,R,h,k))return Ln(e.key,te())||Oe(e),r(!1,e.nativeEvent,"list-navigation"),void(m(o.domReference)&&(g?null==T||T.events.emit("virtualfocus",o.domReference):o.domReference.focus()));const t=F.current,i=Be(u,x),l=Ve(u,x);if(P||("Home"===e.key&&(Oe(e),F.current=i,N()),"End"===e.key&&(Oe(e),F.current=l,N())),k>1){const t=C||Array.from({length:u.current.length},(()=>({width:1,height:1}))),n=function(e,t,n){const r=[];let o=0;return e.forEach(((e,i)=>{let{width:l,height:u}=e;if(l>t&&"production"!==process.env.NODE_ENV)throw new Error("[Floating UI]: Invalid grid - item width at index "+i+" is greater than grid columns");let c=!1;for(n&&(o=0);!c;){const e=[];for(let n=0;n<l;n++)for(let r=0;r<u;r++)e.push(o+n+r*t);o%t+l<=t&&e.every((e=>null==r[e]))?(e.forEach((e=>{r[e]=i})),c=!0):o++}})),[...r]}(t,k,A),r=n.findIndex((e=>null!=e&&!_e(u,e,x))),o=n.reduce(((e,t,n)=>null==t||_e(u,t,x)?e:n),-1),c=n[function(e,t){let{event:n,orientation:r,loop:o,rtl:i,cols:l,disabledIndices:u,minIndex:c,maxIndex:s,prevIndex:a,stopEvent:f=!1}=t,d=a;if(n.key===we){if(f&&Oe(n),-1===a)d=s;else if(d=Ke(e,{startingIndex:d,amount:l,decrement:!0,disabledIndices:u}),o&&(a-l<c||d<0)){const e=a%l,t=s%l,n=s-(t-e);d=t===e?s:t>e?n:n-l}qe(e,d)&&(d=a)}if(n.key===xe&&(f&&Oe(n),-1===a?d=c:(d=Ke(e,{startingIndex:a,amount:l,disabledIndices:u}),o&&a+l>s&&(d=Ke(e,{startingIndex:a%l-l,amount:l,disabledIndices:u}))),qe(e,d)&&(d=a)),"both"===r){const t=O(a/l);n.key===(i?ye:be)&&(f&&Oe(n),a%l!=l-1?(d=Ke(e,{startingIndex:a,disabledIndices:u}),o&&We(d,l,t)&&(d=Ke(e,{startingIndex:a-a%l-1,disabledIndices:u}))):o&&(d=Ke(e,{startingIndex:a-a%l-1,disabledIndices:u})),We(d,l,t)&&(d=a)),n.key===(i?be:ye)&&(f&&Oe(n),a%l!=0?(d=Ke(e,{startingIndex:a,decrement:!0,disabledIndices:u}),o&&We(d,l,t)&&(d=Ke(e,{startingIndex:a+(l-a%l),decrement:!0,disabledIndices:u}))):o&&(d=Ke(e,{startingIndex:a+(l-a%l),decrement:!0,disabledIndices:u})),We(d,l,t)&&(d=a));const r=O(s/l)===t;qe(e,d)&&(d=o&&r?n.key===(i?be:ye)?s:Ke(e,{startingIndex:a-a%l-1,disabledIndices:u}):a)}return d}({current:n.map((e=>null!=e?u.current[e]:null))},{event:e,orientation:R,loop:p,rtl:h,cols:k,disabledIndices:$e([...x||u.current.map(((e,t)=>_e(u,t)?t:void 0)),void 0],n),minIndex:r,maxIndex:o,prevIndex:He(F.current>l?i:F.current,t,n,k,e.key===Dt?"bl":e.key===(h?Tt:Nt)?"tr":"tl"),stopEvent:!0})];if(null!=c&&(F.current=c,N()),"both"===R)return}if(Ln(e.key,R)){if(Oe(e),n&&!g&&Re(e.currentTarget.ownerDocument)===e.currentTarget)return F.current=Mn(e.key,R,h)?i:l,void N();Mn(e.key,R,h)?F.current=p?t>=l?d&&t!==u.current.length?-1:i:Ke(u,{startingIndex:t,disabledIndices:x}):Math.min(l,Ke(u,{startingIndex:t,disabledIndices:x})):F.current=p?t<=i?d&&-1!==t?u.current.length:l:Ke(u,{startingIndex:t,decrement:!0,disabledIndices:x}):Math.max(i,Ke(u,{startingIndex:t,decrement:!0,disabledIndices:x})),qe(u,F.current)&&(F.current=-1),N()}})),re=l.useMemo((()=>g&&n&&Z&&{"aria-activedescendant":G||X}),[g,n,Z,G,X]),oe=l.useMemo((()=>({"aria-orientation":"both"===R?void 0:R,...P?{}:re,onKeyDown:ne,onPointerMove(){W.current=!0}})),[re,ne,R,P]),ie=l.useMemo((()=>{function e(e){"auto"===y&&Te(e.nativeEvent)&&(D.current=!0)}function t(e){D.current=y,"auto"===y&&Ne(e.nativeEvent)&&(D.current=!0)}return{...re,onKeyDown(e){W.current=!1;const t=e.key.startsWith("Arrow"),o=["Home","End"].includes(e.key),i=t||o,l=On(e.key,R,h),c=Tn(e.key,R,h,k),s=On(e.key,te(),h),a=Ln(e.key,R),d=(v?s:a)||"Enter"===e.key||""===e.key.trim();if(g&&n){const t=null==T?void 0:T.nodesRef.current.find((e=>null==e.parentId)),n=T&&t?function(e,t){let n,r=-1;return function t(o,i){i>r&&(n=o,r=i),Le(e,o).forEach((e=>{t(e.id,i+1)}))}(t,0),e.find((e=>e.id===n))}(T.nodesRef.current,t.id):null;if(i&&n&&S){const t=new KeyboardEvent("keydown",{key:e.key,bubbles:!0});if(l||c){var p,m;const r=(null==(p=n.context)?void 0:p.elements.domReference)===e.currentTarget,o=c&&!r?null==(m=n.context)?void 0:m.elements.domReference:l?u.current.find((e=>(null==e?void 0:e.id)===X)):null;o&&(Oe(e),o.dispatchEvent(t),J(void 0))}var y;if((a||o)&&n.context)if(n.context.open&&n.parentId&&e.currentTarget!==n.context.elements.domReference)return Oe(e),void(null==(y=n.context.elements.domReference)||y.dispatchEvent(t))}return ne(e)}if(n||w||!t){if(d){const t=Ln(e.key,te());j.current=v&&t?null:e.key}v?s&&(Oe(e),n?(F.current=Be(u,$.current),N()):r(!0,e.nativeEvent,"list-navigation")):a&&(null!=f&&(F.current=f),Oe(e),!n&&w?r(!0,e.nativeEvent,"list-navigation"):ne(e),n&&N())}},onFocus(){n&&!g&&(F.current=-1,N())},onPointerDown:t,onPointerEnter:t,onMouseDown:e,onClick:e}}),[X,re,k,ne,$,y,u,v,N,r,n,w,R,te,h,f,T,g,S]);return l.useMemo((()=>a?{reference:ie,floating:oe,item:ee}:{}),[a,ie,oe,ee])}const Pn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);class Dn{constructor(e){this.key=e,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(e){this.ref={current:e}}}const Fn=e.forwardRef((({className:e,disabled:n,...r},o)=>t.jsx("hr",{className:e}))),jn=e.forwardRef((({className:e,label:n,disabled:r,...o},i)=>t.jsx("button",{...o,className:e,ref:i,role:"menuitem",disabled:r,children:n}))),Wn=e.forwardRef((({items:n,className:i,itemClassName:u,separatorClassName:c},s)=>{const[a]=r.useLexicalComposerContext(),[f,d]=e.useState(null),[v,h]=e.useState(!1),g=e.useRef([]),y=e.useRef([]),b=e.useRef(!1),{refs:E,floatingStyles:I,context:C}=In({middleware:[(A={alignmentAxis:4,mainAxis:5},{...yt(A),options:[A,L]}),At({fallbackPlacements:["left-start"]}),Ct({padding:10})],onOpenChange:h,open:v,placement:"right-start",strategy:"fixed",whileElementsMounted:gt});var A,L;const M=function(e,t){var n,r;void 0===t&&(t={});const{open:o,elements:i,floatingId:u}=e,{enabled:c=!0,role:s="dialog"}=t,a=Bt(),f=(null==(n=i.domReference)?void 0:n.id)||a,d=l.useMemo((()=>{var e;return(null==(e=Ae(i.floating))?void 0:e.id)||u}),[i.floating,u]),p=null!=(r=Pn.get(s))?r:s,m=null!=_t(),v=l.useMemo((()=>"tooltip"===p||"label"===s?{["aria-"+("label"===s?"labelledby":"describedby")]:o?d:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":"alertdialog"===p?"dialog":p,"aria-controls":o?d:void 0,..."listbox"===p&&{role:"combobox"},..."menu"===p&&{id:f},..."menu"===p&&m&&{role:"menuitem"},..."select"===s&&{"aria-autocomplete":"none"},..."combobox"===s&&{"aria-autocomplete":"list"}}),[p,d,m,o,f,s]),h=l.useMemo((()=>{const e={id:d,...p&&{role:p}};return"tooltip"===p||"label"===s?e:{...e,..."menu"===p&&{"aria-labelledby":f}}}),[p,d,f,s]),g=l.useCallback((e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:d+"-fui-option"}};switch(s){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,"aria-selected":n}}return{}}),[d,s]);return l.useMemo((()=>c?{reference:v,floating:h,item:g}:{}),[c,v,h,g])}(C,{role:"menu"}),O=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:u=!0,escapeKey:c=!0,outsidePress:s=!0,outsidePressEvent:a="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:v=!1,bubbles:h,capture:g}=t,y=zt(),b=je("function"==typeof s?s:()=>!1),E="function"==typeof s?b:s,I=l.useRef(!1),C=l.useRef(!1),{escapeKey:A,outsidePress:L}=En(h),{escapeKey:M,outsidePress:O}=En(g),T=l.useRef(!1),N=je((e=>{var t;if(!n||!u||!c||"Escape"!==e.key)return;if(T.current)return;const o=null==(t=i.current.floatingContext)?void 0:t.nodeId,l=y?Le(y.nodesRef.current,o):[];if(!A&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),P=je((e=>{var t;const n=()=>{var t;N(e),null==(t=ke(e))||t.removeEventListener("keydown",n)};null==(t=ke(e))||t.addEventListener("keydown",n)})),D=je((e=>{var t;const n=I.current;I.current=!1;const l=C.current;if(C.current=!1,"click"===a&&l)return;if(n)return;if("function"==typeof E&&!E(e))return;const u=ke(e),c="["+Ut("inert")+"]",s=Se(o.floating).querySelectorAll(c);let f=p(u)?u:null;for(;f&&!x(f);){const e=k(f);if(x(e)||!p(e))break;f=e}if(s.length&&p(u)&&!u.matches("html,body")&&!Ee(u,o.floating)&&Array.from(s).every((e=>!Ee(f,e))))return;if(m(u)&&W){const t=x(u),n=R(u),r=/auto|scroll/,o=t||r.test(n.overflowX),i=t||r.test(n.overflowY),l=o&&u.clientWidth>0&&u.scrollWidth>u.clientWidth,c=i&&u.clientHeight>0&&u.scrollHeight>u.clientHeight,s="rtl"===n.direction,a=c&&(s?e.offsetX<=u.offsetWidth-u.clientWidth:e.offsetX>u.clientWidth),f=l&&e.offsetY>u.clientHeight;if(a||f)return}const d=null==(t=i.current.floatingContext)?void 0:t.nodeId,v=y&&Le(y.nodesRef.current,d).some((t=>{var n;return Ie(e,null==(n=t.context)?void 0:n.elements.floating)}));if(Ie(e,o.floating)||Ie(e,o.domReference)||v)return;const h=y?Le(y.nodesRef.current,d):[];if(h.length>0){let e=!0;if(h.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),F=je((e=>{var t;const n=()=>{var t;D(e),null==(t=ke(e))||t.removeEventListener(a,n)};null==(t=ke(e))||t.addEventListener(a,n)}));l.useEffect((()=>{if(!n||!u)return;i.current.__escapeKeyBubbles=A,i.current.__outsidePressBubbles=L;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function l(){window.clearTimeout(e),T.current=!0}function s(){e=window.setTimeout((()=>{T.current=!1}),w()?5:0)}const f=Se(o.floating);c&&(f.addEventListener("keydown",M?P:N,M),f.addEventListener("compositionstart",l),f.addEventListener("compositionend",s)),E&&f.addEventListener(a,O?F:D,O);let d=[];return v&&(p(o.domReference)&&(d=S(o.domReference)),p(o.floating)&&(d=d.concat(S(o.floating))),!p(o.reference)&&o.reference&&o.reference.contextElement&&(d=d.concat(S(o.reference.contextElement)))),d=d.filter((e=>{var t;return e!==(null==(t=f.defaultView)?void 0:t.visualViewport)})),d.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{c&&(f.removeEventListener("keydown",M?P:N,M),f.removeEventListener("compositionstart",l),f.removeEventListener("compositionend",s)),E&&f.removeEventListener(a,O?F:D,O),d.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[i,o,c,E,a,n,r,v,u,A,L,N,M,P,D,O,F]),l.useEffect((()=>{I.current=!1}),[E,a]);const j=l.useMemo((()=>({onKeyDown:N,...f&&{[xn[d]]:e=>{r(!1,e.nativeEvent,"reference-press")},..."click"!==d&&{onClick(e){r(!1,e.nativeEvent,"reference-press")}}}})),[N,r,f,d]),W=l.useMemo((()=>({onKeyDown:N,onMouseDown(){C.current=!0},onMouseUp(){C.current=!0},[Rn[a]]:()=>{I.current=!0}})),[N,a]);return l.useMemo((()=>u?{reference:j,floating:W}:{}),[u,j,W])}(C),T=Nn(C,{activeIndex:f,listRef:g,onNavigate:d}),N=function(e,t){var n;const{open:r,dataRef:o}=e,{listRef:i,activeIndex:u,onMatch:c,onTypingChange:s,enabled:a=!0,findMatch:f=null,resetMs:d=750,ignoreKeys:p=[],selectedIndex:m=null}=t,v=l.useRef(-1),h=l.useRef(""),g=l.useRef(null!=(n=null!=m?m:u)?n:-1),y=l.useRef(null),b=je(c),w=je(s),x=De(f),R=De(p);Pe((()=>{r&&(Xt(v),y.current=null,h.current="")}),[r]),Pe((()=>{var e;r&&""===h.current&&(g.current=null!=(e=null!=m?m:u)?e:-1)}),[r,m,u]);const E=je((e=>{e?o.current.typing||(o.current.typing=e,w(e)):o.current.typing&&(o.current.typing=e,w(e))})),k=je((e=>{function t(e,t,n){const r=x.current?x.current(t,n):t.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()))));return r?e.indexOf(r):-1}const n=i.current;if(h.current.length>0&&" "!==h.current[0]&&(-1===t(n,n,h.current)?E(!1):" "===e.key&&Oe(e)),null==n||R.current.includes(e.key)||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey)return;r&&" "!==e.key&&(Oe(e),E(!0)),n.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&h.current===e.key&&(h.current="",g.current=y.current),h.current+=e.key,Xt(v),v.current=window.setTimeout((()=>{h.current="",g.current=y.current,E(!1)}),d);const o=g.current,l=t(n,[...n.slice((o||0)+1),...n.slice(0,(o||0)+1)],h.current);-1!==l?(b(l),y.current=l):" "!==e.key&&(h.current="",E(!1))})),I=l.useMemo((()=>({onKeyDown:k})),[k]),S=l.useMemo((()=>({onKeyDown:k,onKeyUp(e){" "===e.key&&E(!1)}})),[k,E]);return l.useMemo((()=>a?{reference:I,floating:S}:{}),[a,I,S])}(C,{activeIndex:f,enabled:v,listRef:y,onMatch:d}),{getFloatingProps:P,getItemProps:D}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),o=l.useCallback((t=>Sn(t,e,"reference")),t),i=l.useCallback((t=>Sn(t,e,"floating")),n),u=l.useCallback((t=>Sn(t,e,"item")),r);return l.useMemo((()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:u})),[o,i,u])}([M,O,T,N]),[F,j]=e.useState([]);return e.useEffect((()=>{let e;function t(t){t.preventDefault(),E.setPositionReference({getBoundingClientRect:()=>({bottom:t.clientY,height:0,left:t.clientX,right:t.clientX,top:t.clientY,width:0,x:t.clientX,y:t.clientY})});let r=[];n&&a.read((()=>{const e=o.$getNearestNodeFromDOMNode(t.target);e&&(r=n.filter((t=>!t.$showOn||t.$showOn(e))))}));const i=r.map(((e,t)=>"separator"===e.type?{className:c,key:e.key+"-"+t,type:e.type}:{className:u,disabled:e.disabled,key:e.key,label:e.title,onClick:()=>a.update((()=>e.$onSelect())),title:e.title,type:e.type}));y.current=i.map((e=>e.key)),j(i),h(!0),clearTimeout(e),b.current=!1,e=window.setTimeout((()=>{b.current=!0}),300)}function r(){b.current&&h(!1)}return document.addEventListener("contextmenu",t),document.addEventListener("mouseup",r),()=>{document.removeEventListener("contextmenu",t),document.removeEventListener("mouseup",r),clearTimeout(e)}}),[n,u,c,E,a]),t.jsx(sn,{children:v&&t.jsx(wn,{lockScroll:!0,children:t.jsx(gn,{context:C,initialFocus:E.floating,children:t.jsx("div",{className:i,ref:E.setFloating,style:I,...P(),children:F.map(((e,n)=>"item"===e.type?t.jsx(jn,{...D({...e,onClick(){e.onClick(),h(!1)},onMouseUp(){e.onClick(),h(!1)},ref(e){g.current[n]=e},tabIndex:f===n?0:-1})}):"separator"===e.type?t.jsx(Fn,{...D({...e,ref(e){g.current[n]=e},tabIndex:f===n?0:-1})}):void 0))})})})})}));exports.NodeContextMenuOption=class extends Dn{constructor(e,t){super(e),this.type="item",this.title=e,this.disabled=t.disabled??!1,this.$onSelect=t.$onSelect,t.$showOn&&(this.$showOn=t.$showOn)}},exports.NodeContextMenuPlugin=Wn,exports.NodeContextMenuSeparator=class extends Dn{constructor(e){super("_separator"),this.type="separator",e&&e.$showOn&&(this.$showOn=e.$showOn)}};
